<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Factorio Blueprints Decoder/Encoder</title>
<link rel="icon" href="https://i.ibb.co/Hp44999c/blueprint-book.png" type="image/png">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">

<link rel="stylesheet" href="style.css">

</head>
<body>

<div class="container">
  <div class="tabs">
    <div class="tab active" onclick="switchTab('decode')">Blueprint Decode/Encode</div>
    <div class="tab" onclick="switchTab('book')">–ö–Ω–∏–≥–∞ —á–µ—Ä—Ç–µ–∂–µ–π</div>
  </div>

  <div id="decode" class="content active">
    <div class="blueprint-panel">
      <div class="panel-header"><h3 class="panel-title">–ò—Å—Ç–æ—Ä–∏—è</h3></div>
      <div class="history-container">
        <div id="historyItems" class="history-items"></div>
        <button onclick="clearHistory()" class="button-danger">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
    </div>
    
    <div class="blueprint-panel">
      <div class="panel-header"><h3 class="panel-title">–°—Ç—Ä–æ–∫–∞ —á–µ—Ä—Ç–µ–∂–∞</h3></div>
      <textarea id="blueprintInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É —á–µ—Ä—Ç–µ–∂–∞...">0eJyrVkrKKU0tKMrMK4lPys/PVrKqRogUK1lFx+ooZZak5ipZIYR1wQp1lHISk1JzgBIXFl3YerHxYtOFfRc2XdhwsV/hwq4Ley/suLD5wgagqpTU4uSizIKSzPw8kNp5F/Zf2HGx8cIGsJKtQAWJySWZZanxmXkpqRVKVgY6SmWpRcVg1aZmRpYmlpZAytjS2My4thYAsPtKcw==</textarea>
      <div class="button-group">
        <button onclick="decodeBlueprint()" class="button-primary">Decode</button>
        <button onclick="clearBlueprint()" class="button-danger">–£–¥–∞–ª–∏—Ç—å</button>
      </div>
    </div>
    
    <div class="blueprint-panel">
      <div class="panel-header"><h3 class="panel-title">JSON —Ä–µ–¥–∞–∫—Ç–æ—Ä</h3></div>
      <div class="search-container">
        <input type="text" id="searchInput" class="search-input" placeholder="–ü–æ–∏—Å–∫ –≤ JSON...">
        <button onclick="searchInJson()">–ù–∞–π—Ç–∏</button>
        <button onclick="findNext()">–°–ª–µ–¥—É—é—â–∏–π</button>
        <button onclick="findPrev()">–ü—Ä–µ–¥—ã–¥—É—â–∏–π</button>
        <button onclick="toggleReplaceUI()">–ó–∞–º–µ–Ω–∏—Ç—å</button>
      </div>
      <div id="replaceContainer" class="replace-container">
          <div class="replace-fields">
              <input type="text" id="replaceInput" placeholder="–¢–µ–∫—Å—Ç –¥–ª—è –∑–∞–º–µ–Ω—ã...">
              <input type="text" id="replaceWithInput" placeholder="–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞...">
          </div>
          <button onclick="replaceAll()" class="button-primary">–ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ</button>
      </div>
      <div id="jsonEditorContainer" class="json-editor-container"></div>
      <button onclick="encodeJson()" class="button-primary">Encode</button>
    </div>
    
    <div class="blueprint-panel">
      <div class="panel-header"><h3 class="panel-title">Encoded Blueprint</h3></div>
      <textarea id="encodedOutput" readonly></textarea>
      <div class="button-group">
        <button onclick="copyToClipboard('encodedOutput', event)">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <div id="book" class="content">
    <div class="blueprint-panel">
      <div class="panel-header"><h3 class="panel-title">–ö–æ–¥ –∫–Ω–∏–≥–∏ —á–µ—Ä—Ç–µ–∂–µ–π</h3></div>
      <textarea id="bookInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –∫–Ω–∏–≥–∏ —á–µ—Ä—Ç–µ–∂–µ–π...">0eNpFjUsKwjAQhq8Ssq5WrArNVvAE7kRKq4MG+6KJIhTBx9KFZ9ATFLUqgnqFyY0c3ZRZ/Mw33/DnPAjnkGYy1l6QJDMu8oooLgZDi0sNERcVrv1Fi4d+ACEd8ISl2ZgtvvGMhTkwfOILH3jBgqwxqFEmUy2T+OceybrjFQtS3gw/Zo0PCqJXmpLWG72XrA8hTDI/Yngxa7Mj42P2grGp1qkStq3rEdi9bj9RWsZU44+0XIAn4zEsuWhYfAGZ+ne2O0235boUjut0nNXqC7lob2Q=</textarea>
      <div class="button-group">
        <button onclick="decodeBook()" class="button-primary">Decode Book</button>
        <button onclick="clearBookInput()" class="button-danger">–£–¥–∞–ª–∏—Ç—å</button>
      </div>
    </div>

    <div class="blueprint-panel">
        <div class="panel-header"><h3 class="panel-title">–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏</h3></div>
        
        <h3>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏</h3>
        <input type="text" id="bookLabel" maxlength="199">
        <div class="charCounter" id="labelCounter">0/199</div>

        <h3>–û–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏</h3>
        <input type="text" id="bookDescription" maxlength="499">
        <div class="charCounter" id="descCounter">0/499</div>

        <h3>–ò–∫–æ–Ω–∫–∏ –¥–ª—è –∫–Ω–∏–≥–∏ (1-4)</h3>
        <div id="iconSelectors"></div>
    </div>

    <div class="blueprint-panel">
      <div class="panel-header"><h3 class="panel-title">JSON –∫–Ω–∏–≥–∏</h3></div>
      <textarea id="bookDecoded"></textarea>
      <div class="button-group">
        <button onclick="reencodeBookJson()" class="button-primary">Encode</button>
      </div>
      <h3>Encoded Book</h3>
      <textarea id="bookEncoded" readonly></textarea>
      <div class="button-group">
        <button onclick="copyToClipboard('bookEncoded', event)">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  </div>

	    <div class="footer">
      <div class="footer-links">
	    <p>üêû <a href="https://www.youtube.com/@FCT-Ostin" target="_blank">YouTube</a></p>
		<p>üíô <a href="https://t.me/FCTostin" target="_blank">Telegram</a></p>
        <p>üéÆ <a href="https://steamcommunity.com/groups/FCTgroup" target="_blank">Steam Group</a></p>
        <p>üïπ <a href="https://www.patreon.com/c/OstinFCT" target="_blank">Patreon</a></p>
        <p>ü™ê <a href="https://boosty.to/ostinfct" target="_blank">Boosty</a></p>
      </div>
      <div class="footer-links">
        <p>–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ Steam: <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=3476404033" target="_blank">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ "–ö—Ä–∞—Å–æ—Ç–µ" V.2</a></p>
        <p>–°–æ–∑–¥–∞–Ω–æ –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –¢–µ–ª–µ–≥—Ä–∞–º —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ FCTostin</p>
      </div>
    </div>
	
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/search/searchcursor.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/search/match-highlighter.min.js"></script>

<script src="script.js"></script>

</body>
</html>
